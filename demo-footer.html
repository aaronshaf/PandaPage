<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DOCX Footer Demo - 010.docx</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background-color: #e5e7eb;
      padding: 20px;
    }
    
    .document-container {
      max-width: 8.5in;
      margin: 0 auto;
    }
    
    .page {
      position: relative;
      margin-bottom: 2rem;
      min-height: 11in;
      background: white;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .page-content {
      padding: 1in;
      padding-bottom: 2in;
    }
    
    .footer {
      position: absolute;
      bottom: 0;
      left: 1in;
      right: 1in;
      padding-bottom: 0.5in;
    }
    
    @media print {
      body { background: white; padding: 0; }
      .page {
        page-break-after: always;
        margin: 0;
        box-shadow: none;
      }
    }
  </style>
</head>
<body>
  <div id="viewer-container">
    <div class="text-center text-gray-600 p-8">
      <p>Loading document...</p>
    </div>
  </div>

  <script type="module">
    import { parseDocxDocument } from './packages/parser/dist/index.js';
    import { renderToHtml } from './packages/renderer-dom/dist/index.js';
    
    async function loadDocument() {
      try {
        const response = await fetch('./documents/010.docx');
        const arrayBuffer = await response.arrayBuffer();
        
        console.log('Parsing document...');
        const parsedDoc = await parseDocxDocument(arrayBuffer);
        
        console.log('Parsed document:', {
          elements: parsedDoc.elements.length,
          hasFooters: !!parsedDoc.footers,
          footerTypes: parsedDoc.footers ? Object.keys(parsedDoc.footers) : []
        });
        
        // Render to HTML
        const html = renderToHtml(parsedDoc);
        
        // Display the rendered document
        document.getElementById('viewer-container').innerHTML = html;
        
        // Log footer analysis
        const footers = document.querySelectorAll('.footer');
        console.log(`Rendered ${footers.length} footers`);
        footers.forEach((footer, idx) => {
          const pageNum = footer.closest('.page')?.getAttribute('data-page-number');
          console.log(`Footer ${idx + 1} on page ${pageNum}:`, footer.textContent?.trim());
        });
        
      } catch (error) {
        console.error('Error loading document:', error);
        document.getElementById('viewer-container').innerHTML = `
          <div class="text-center text-red-600 p-8">
            <p>Error loading document: ${error.message}</p>
          </div>
        `;
      }
    }
    
    loadDocument();
  </script>
</body>
</html>